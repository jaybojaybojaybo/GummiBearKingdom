@*
	For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
	ViewData["Title"] = "Products";
}

@model IEnumerable<GummiBearKingdom.Models.Product>
<html>
<head>
	<title>Products</title>
</head>
<body>
	<h1>Products</h1>

	<div>
		<div class="row">
			<div class="col">
				<table class="table">
					<thead>
						<tr>
							<th>
								@Html.DisplayNameFor(model => model.Name)
							</th>
							<th>
								@Html.DisplayNameFor(model => model.Description)
							</th>
							<th>
								@Html.DisplayNameFor(model => model.Price)
							</th>
							<th>
								@Html.DisplayNameFor(model => model.Category)
							</th>
							<th>
								Review Amt.
							</th>
							<th>
								Avg. Rating
							</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var product in Model)
					{
						<tr>
							<td>
								@Html.DisplayFor(modelProduct => product.Name)
							</td>
							<td>
								@Html.DisplayFor(modelProduct => product.Description)
							</td>
							<td>
								@Html.DisplayFor(modelProduct => product.Price)
							</td>
							<td>
								@Html.DisplayFor(modelProduct => product.Category.Name)
							</td>
							<td>
								@product.Reviews.Count
							</td>
							<td>
								@product.GetAvgRate(@product)
							</td>
							<td>
								<a asp-action="Edit" asp-route-id="@product.ProductId">Edit</a> |
								<a asp-action="Details" asp-route-id="@product.ProductId">Details</a> |
								<a asp-action="Delete" asp-route-id="@product.ProductId">Delete</a> |
								<a asp-controller="Reviews" asp-action="Create" asp-route-id="@product.ProductId">Add Review</a>
							</td>
						</tr>

				}
					</tbody>
				</table>
			</div>
		</div>
		<a class="btn btn-info" asp-action="Create">Create New Product</a>
		<a class="btn btn-danger" asp-action="DeleteAll">Delete All Products</a>
	</div>
</body>
</html>
